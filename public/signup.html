<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Start Your AI Lead System - Sign Up</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
      font-size: 32px;
      margin-bottom: 8px;
      color: #1a1a1a;
    }

    .subtitle {
      color: #666;
      margin-bottom: 32px;
      font-size: 16px;
    }

    .form-section {
      margin-bottom: 32px;
    }

    .form-section h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: #1a1a1a;
      border-bottom: 2px solid #667eea;
      padding-bottom: 8px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #333;
      font-size: 14px;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s;
      font-family: inherit;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }


    .trial-badge {
      display: inline-block;
      background: #10b981;
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    button {
      width: 100%;
      padding: 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #5568d3;
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .loading.active {
      display: block;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-size: 18px;
      color: #667eea;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .loading-subtext {
      color: #666;
      font-size: 14px;
    }

    .success {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .success.active {
      display: block;
    }

    .success-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .success h2 {
      font-size: 28px;
      margin-bottom: 12px;
      color: #10b981;
    }

    .success-details {
      background: #f8f9ff;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
      text-align: left;
    }

    .success-details h3 {
      font-size: 16px;
      margin-bottom: 12px;
      color: #333;
    }

    .success-details p {
      margin: 8px 0;
      color: #666;
      font-size: 14px;
    }

    .success-details strong {
      color: #1a1a1a;
    }

    .action-buttons {
      display: grid;
      gap: 12px;
      margin-top: 24px;
    }

    .action-buttons a {
      display: block;
      padding: 14px;
      background: #667eea;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      text-align: center;
      transition: background 0.3s;
    }

    .action-buttons a:hover {
      background: #5568d3;
    }

    .action-buttons a.secondary {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }

    .action-buttons a.secondary:hover {
      background: #f8f9ff;
    }

    .error {
      background: #fee;
      border: 1px solid #fcc;
      color: #c33;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .error.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Form Section -->
    <div id="form-section">
      <h1>ðŸš€ Launch Your AI Lead System</h1>
      <p class="subtitle">Start converting leads in 5 minutes. 14-day free trial, custom pricing.</p>

      <div class="error" id="error-message"></div>

      <form id="signup-form">
        <!-- Business Info -->
        <div class="form-section">
          <h2>ðŸ“Š Business Information</h2>
          
          <div class="form-group">
            <label for="businessName">Business Name *</label>
            <input type="text" id="businessName" name="businessName" required placeholder="e.g. Acme Plumbing" list="business-suggestions">
            <datalist id="business-suggestions">
              <option value="Acme Plumbing">
              <option value="Premier Electric">
              <option value="City HVAC">
              <option value="Metro Dental">
              <option value="Pro Legal">
            </datalist>
          </div>

          <div class="form-group">
            <label for="industry">Industry *</label>
            <select id="industry" name="industry" required>
              <option value="">Select industry...</option>
              <option value="plumbing">Plumbing</option>
              <option value="hvac">HVAC</option>
              <option value="electrical">Electrical</option>
              <option value="dental">Dental</option>
              <option value="medical">Medical</option>
              <option value="real_estate">Real Estate</option>
              <option value="home_improvement">Home Improvement</option>
              <option value="legal">Legal</option>
              <option value="automotive">Automotive</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="primaryService">Primary Service *</label>
            <input type="text" id="primaryService" name="primaryService" required placeholder="e.g. Emergency Plumbing, Dental Checkups, Legal Consultation">
          </div>

          <div class="form-group">
            <label for="serviceArea">Service Area *</label>
            <input type="text" id="serviceArea" name="serviceArea" required placeholder="e.g. London, Manchester, Nationwide">
          </div>

          <div class="form-group">
            <label for="website">Website (optional)</label>
            <input type="url" id="website" name="website" placeholder="https://acmeplumbing.com">
          </div>

          <div class="form-group">
            <label for="businessSize">Business Size *</label>
            <select id="businessSize" name="businessSize" required>
              <option value="">Select size...</option>
              <option value="solo">Solo Entrepreneur</option>
              <option value="small">Small Business (2-10 employees)</option>
              <option value="medium">Medium Business (11-50 employees)</option>
              <option value="large">Large Business (50+ employees)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="monthlyLeads">Monthly Lead Volume *</label>
            <select id="monthlyLeads" name="monthlyLeads" required>
              <option value="">Select volume...</option>
              <option value="1-50">1-50 leads/month</option>
              <option value="51-200">51-200 leads/month</option>
              <option value="201-500">201-500 leads/month</option>
              <option value="501-1000">501-1,000 leads/month</option>
              <option value="1000+">1,000+ leads/month</option>
            </select>
          </div>

          <div class="form-group">
            <label for="timezone">Timezone *</label>
            <select id="timezone" name="timezone" required>
              <option value="">Select timezone...</option>
              <option value="Europe/London">GMT (London)</option>
              <option value="Europe/Dublin">GMT (Dublin)</option>
              <option value="Europe/Paris">CET (Paris, Berlin)</option>
              <option value="Europe/Rome">CET (Rome, Madrid)</option>
              <option value="Europe/Amsterdam">CET (Amsterdam)</option>
              <option value="America/New_York">EST (New York)</option>
              <option value="America/Chicago">CST (Chicago)</option>
              <option value="America/Denver">MST (Denver)</option>
              <option value="America/Los_Angeles">PST (Los Angeles)</option>
              <option value="Australia/Sydney">AEST (Sydney)</option>
              <option value="Australia/Melbourne">AEST (Melbourne)</option>
            </select>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="form-section">
          <h2>ðŸ‘¤ Your Contact Information</h2>
          
          <div class="form-group">
            <label for="ownerName">Your Name *</label>
            <input type="text" id="ownerName" name="ownerName" required placeholder="John Smith">
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required placeholder="john@acmeplumbing.com">
          </div>

          <div class="form-group">
            <label for="phone">Phone *</label>
            <input type="tel" id="phone" name="phone" required placeholder="+44 20 1234 5678">
          </div>

          <div class="form-group">
            <label for="role">Your Role *</label>
            <select id="role" name="role" required>
              <option value="">Select role...</option>
              <option value="owner">Business Owner</option>
              <option value="manager">Manager</option>
              <option value="director">Director</option>
              <option value="marketing">Marketing Manager</option>
              <option value="sales">Sales Manager</option>
              <option value="other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="currentLeadSource">Current Lead Sources (optional)</label>
            <select id="currentLeadSource" name="currentLeadSource">
              <option value="">Select main source...</option>
              <option value="google">Google Ads</option>
              <option value="facebook">Facebook/Instagram</option>
              <option value="referrals">Referrals</option>
              <option value="website">Website</option>
              <option value="social">Social Media</option>
              <option value="direct">Direct Mail</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>

        <!-- AI Preferences -->
        <div class="form-section">
          <h2>ðŸ¤– AI Assistant Preferences</h2>
          
          <div class="form-group">
            <label for="voiceGender">Voice Gender *</label>
            <select id="voiceGender" name="voiceGender" required>
              <option value="">Select voice...</option>
              <option value="female">Female (Recommended)</option>
              <option value="male">Male</option>
            </select>
          </div>

          <div class="form-group">
            <label for="callHours">Preferred Call Hours *</label>
            <select id="callHours" name="callHours" required>
              <option value="">Select hours...</option>
              <option value="9am-5pm">9am-5pm (Business Hours)</option>
              <option value="8am-6pm">8am-6pm (Extended Hours)</option>
              <option value="7am-7pm">7am-7pm (Early/Late)</option>
              <option value="24/7">24/7 (Always Available)</option>
              <option value="custom">Custom Hours</option>
            </select>
          </div>

          <div class="form-group">
            <label for="urgency">How Urgent is Lead Response? *</label>
            <select id="urgency" name="urgency" required>
              <option value="">Select urgency...</option>
              <option value="immediate">Immediate (within 30 seconds)</option>
              <option value="fast">Fast (within 5 minutes)</option>
              <option value="quick">Quick (within 1 hour)</option>
              <option value="same_day">Same Day</option>
              <option value="next_day">Next Business Day</option>
            </select>
          </div>

          <div class="form-group">
            <label for="goals">Primary Goal *</label>
            <select id="goals" name="goals" required>
              <option value="">Select goal...</option>
              <option value="book_appointments">Book Appointments</option>
              <option value="generate_leads">Generate Qualified Leads</option>
              <option value="follow_up">Follow Up Existing Leads</option>
              <option value="customer_service">Customer Service</option>
              <option value="sales_calls">Direct Sales Calls</option>
            </select>
          </div>
        </div>


        <button type="submit" id="submit-btn">ðŸš€ Start 14-Day Free Trial</button>
        <p style="text-align: center; margin-top: 16px; color: #666; font-size: 13px;">
          No credit card required. Cancel anytime.
        </p>
      </form>
    </div>

    <!-- Loading Section -->
    <div class="loading" id="loading-section">
      <div class="loading-spinner"></div>
      <div class="loading-text" id="loading-text">Creating your AI system...</div>
      <div class="loading-subtext" id="loading-subtext">This will take about 30 seconds</div>
    </div>

    <!-- Success Section -->
    <div class="success" id="success-section">
      <div class="success-icon">ðŸŽ‰</div>
      <h2>Your AI System is Live!</h2>
      <p style="color: #666; margin-bottom: 24px;">Check your email for complete setup instructions</p>

      <div class="success-details">
        <h3>ðŸ“¥ Your Lead Import URL:</h3>
        <p><strong id="import-url">Loading...</strong></p>
        
        <h3 style="margin-top: 16px;">ðŸ”‘ Your API Key:</h3>
        <p><strong id="api-key">Loading...</strong></p>
        
        <h3 style="margin-top: 16px;">ðŸ†” Your Client ID:</h3>
        <p><strong id="client-key">Loading...</strong></p>
      </div>

      <div class="action-buttons">
        <a href="#" id="import-link">ðŸ“¥ Import Your First Leads</a>
        <a href="#" id="dashboard-link" class="secondary">ðŸ“Š View Dashboard</a>
      </div>
    </div>
  </div>

  <script>
    // Auto-fill business name based on industry
    document.getElementById('industry').addEventListener('change', function() {
      const industry = this.value;
      const businessNameField = document.getElementById('businessName');
      
      if (!businessNameField.value) {
        const suggestions = {
          'plumbing': 'Premier Plumbing',
          'hvac': 'City HVAC',
          'electrical': 'Metro Electric',
          'dental': 'Smile Dental',
          'medical': 'HealthFirst Medical',
          'real_estate': 'Prime Properties',
          'home_improvement': 'Dream Homes',
          'legal': 'Justice Legal',
          'automotive': 'AutoPro'
        };
        
        if (suggestions[industry]) {
          businessNameField.value = suggestions[industry];
        }
      }
    });

    document.getElementById('signup-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      
      // Show loading
      document.getElementById('form-section').style.display = 'none';
      document.getElementById('loading-section').classList.add('active');
      
      const loadingSteps = [
        { text: 'Creating your AI system...', subtext: 'Setting up your account' },
        { text: 'Generating unique credentials...', subtext: 'Creating API keys' },
        { text: 'Preparing your dashboard...', subtext: 'Almost there!' },
        { text: 'Sending welcome email...', subtext: 'Final touches' }
      ];
      
      let stepIndex = 0;
      const stepInterval = setInterval(() => {
        if (stepIndex < loadingSteps.length) {
          document.getElementById('loading-text').textContent = loadingSteps[stepIndex].text;
          document.getElementById('loading-subtext').textContent = loadingSteps[stepIndex].subtext;
          stepIndex++;
        }
      }, 3000);
      
      try {
        const response = await fetch('/api/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        clearInterval(stepInterval);
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error || 'Signup failed');
        }
        
        const result = await response.json();
        
        // Show success
        document.getElementById('loading-section').classList.remove('active');
        document.getElementById('success-section').classList.add('active');
        
        // Fill in details
        const baseUrl = window.location.origin;
        const importUrl = `${baseUrl}/lead-import.html?client=${result.clientKey}&key=${result.apiKey}`;
        
        document.getElementById('import-url').textContent = importUrl;
        document.getElementById('api-key').textContent = result.apiKey;
        document.getElementById('client-key').textContent = result.clientKey;
        document.getElementById('import-link').href = importUrl;
        document.getElementById('dashboard-link').href = `${baseUrl}/dashboard/${result.clientKey}`;
        
      } catch (error) {
        clearInterval(stepInterval);
        document.getElementById('loading-section').classList.remove('active');
        document.getElementById('form-section').style.display = 'block';
        
        const errorEl = document.getElementById('error-message');
        errorEl.textContent = error.message;
        errorEl.classList.add('active');
      }
    });
  </script>
</body>
</html>

