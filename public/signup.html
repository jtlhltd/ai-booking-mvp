<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Start Your AI Lead System - Sign Up</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 20px;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    h1 {
      font-size: 32px;
      margin-bottom: 8px;
      color: #1a1a1a;
    }

    .subtitle {
      color: #666;
      margin-bottom: 32px;
      font-size: 16px;
    }

    .form-section {
      margin-bottom: 32px;
    }

    .form-section h2 {
      font-size: 18px;
      margin-bottom: 16px;
      color: #1a1a1a;
      border-bottom: 2px solid #667eea;
      padding-bottom: 8px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: #333;
      font-size: 14px;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s;
      font-family: inherit;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }


    .trial-badge {
      display: inline-block;
      background: #10b981;
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    /* Interactive Calendar Styles */
    .calendar-container, .hours-container {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      margin-top: 12px;
      background: #fafafa;
    }

    .calendar-header h4 {
      margin: 0 0 16px 0;
      color: #333;
      font-size: 16px;
    }

    .days-grid, .hours-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      margin-bottom: 16px;
    }

    .hours-grid {
      grid-template-columns: repeat(5, 1fr);
    }

    .day-header {
      text-align: center;
      font-weight: 600;
      color: #666;
      padding: 8px;
      font-size: 12px;
    }

    .day-option, .time-slot {
      position: relative;
      text-align: center;
    }

    .day-option input, .time-slot input {
      display: none;
    }

    .day-option label, .time-slot label {
      display: block;
      padding: 12px 8px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
      font-weight: 500;
    }

    .day-option label:hover, .time-slot label:hover {
      border-color: #667eea;
      background: #f8f9ff;
    }

    .day-option input:checked + label, .time-slot input:checked + label {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    .quick-select {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .quick-btn {
      padding: 8px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 6px;
      background: white;
      color: #333;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s;
    }

    .quick-btn:hover {
      border-color: #667eea;
      background: #f8f9ff;
    }

    .quick-btn.clear-btn {
      border-color: #ef4444;
      color: #ef4444;
    }

    .quick-btn.clear-btn:hover {
      background: #fef2f2;
    }

    button {
      width: 100%;
      padding: 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #5568d3;
    }

    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .loading.active {
      display: block;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .loading-text {
      font-size: 18px;
      color: #667eea;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .loading-subtext {
      color: #666;
      font-size: 14px;
    }

    .success {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .success.active {
      display: block;
    }

    .success-icon {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .success h2 {
      font-size: 28px;
      margin-bottom: 12px;
      color: #10b981;
    }

    .success-details {
      background: #f8f9ff;
      border-radius: 8px;
      padding: 20px;
      margin: 24px 0;
      text-align: left;
    }

    .success-details h3 {
      font-size: 16px;
      margin-bottom: 12px;
      color: #333;
    }

    .success-details p {
      margin: 8px 0;
      color: #666;
      font-size: 14px;
    }

    .success-details strong {
      color: #1a1a1a;
    }

    .action-buttons {
      display: grid;
      gap: 12px;
      margin-top: 24px;
    }

    .action-buttons a {
      display: block;
      padding: 14px;
      background: #667eea;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      text-align: center;
      transition: background 0.3s;
    }

    .action-buttons a:hover {
      background: #5568d3;
    }

    .action-buttons a.secondary {
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
    }

    .action-buttons a.secondary:hover {
      background: #f8f9ff;
    }

    .error {
      background: #fee;
      border: 1px solid #fcc;
      color: #c33;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: none;
    }

    .error.active {
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Form Section -->
    <div id="form-section">
      <h1>ğŸš€ Launch Your AI Lead System</h1>
      <p class="subtitle">Start converting leads in 5 minutes. Custom pricing based on your needs.</p>

      <div class="error" id="error-message"></div>

      <form id="signup-form">
        <!-- Business Info -->
        <div class="form-section">
          <h2>ğŸ“Š Business Information</h2>
          
          <div class="form-group">
            <label for="businessName">Business Name *</label>
            <input type="text" id="businessName" name="businessName" required placeholder="e.g. Acme Plumbing">
          </div>

          <div class="form-group">
            <label for="industry">What type of business do you run? *</label>
            <select id="industry" name="industry" required>
              <option value="">Choose your business type...</option>
              <option value="plumbing">ğŸ”§ Plumbing Services</option>
              <option value="hvac">ğŸŒ¡ï¸ HVAC (Heating & Cooling)</option>
              <option value="electrical">âš¡ Electrical Services</option>
              <option value="dental">ğŸ¦· Dental Practice</option>
              <option value="medical">ğŸ¥ Medical Practice</option>
              <option value="real_estate">ğŸ  Real Estate</option>
              <option value="home_improvement">ğŸ¡ Home Improvement</option>
              <option value="legal">âš–ï¸ Legal Services</option>
              <option value="automotive">ğŸš— Automotive Services</option>
              <option value="other">âœï¸ Other (Specify below)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="primaryService">Primary Service *</label>
            <input type="text" id="primaryService" name="primaryService" required placeholder="e.g. Emergency Plumbing, Dental Checkups, Legal Consultation">
          </div>

          <div class="form-group">
            <label for="serviceArea">Service Area *</label>
            <input type="text" id="serviceArea" name="serviceArea" required placeholder="e.g. London, Manchester, Nationwide">
          </div>

          <div class="form-group">
            <label for="website">Website (optional)</label>
            <input type="url" id="website" name="website" placeholder="https://acmeplumbing.com">
          </div>

          <div class="form-group">
            <label for="businessSize">How big is your business? *</label>
            <select id="businessSize" name="businessSize" required>
              <option value="">Choose your business size...</option>
              <option value="solo">ğŸ‘¤ Just me (Solo entrepreneur)</option>
              <option value="small">ğŸ‘¥ Small team (2-10 people)</option>
              <option value="medium">ğŸ¢ Medium business (11-50 people)</option>
              <option value="large">ğŸ­ Large business (50+ people)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="monthlyLeads">How many leads do you get per month? *</label>
            <select id="monthlyLeads" name="monthlyLeads" required>
              <option value="">Choose your lead volume...</option>
              <option value="1-50">ğŸ“ˆ 1-50 leads/month (Getting started)</option>
              <option value="51-200">ğŸ“ˆ 51-200 leads/month (Growing business)</option>
              <option value="201-500">ğŸ“ˆ 201-500 leads/month (Established)</option>
              <option value="501-1000">ğŸ“ˆ 501-1,000 leads/month (Busy)</option>
              <option value="1000+">ğŸ“ˆ 1,000+ leads/month (Very busy)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="timezone">What timezone are you in? *</label>
            <select id="timezone" name="timezone" required>
              <option value="">Choose your timezone...</option>
              <option value="Europe/London">ğŸ‡¬ğŸ‡§ GMT (London, UK)</option>
              <option value="Europe/Dublin">ğŸ‡®ğŸ‡ª GMT (Dublin, Ireland)</option>
              <option value="Europe/Paris">ğŸ‡«ğŸ‡· CET (Paris, Berlin)</option>
              <option value="Europe/Rome">ğŸ‡®ğŸ‡¹ CET (Rome, Madrid)</option>
              <option value="Europe/Amsterdam">ğŸ‡³ğŸ‡± CET (Amsterdam)</option>
              <option value="America/New_York">ğŸ‡ºğŸ‡¸ EST (New York)</option>
              <option value="America/Chicago">ğŸ‡ºğŸ‡¸ CST (Chicago)</option>
              <option value="America/Denver">ğŸ‡ºğŸ‡¸ MST (Denver)</option>
              <option value="America/Los_Angeles">ğŸ‡ºğŸ‡¸ PST (Los Angeles)</option>
              <option value="Australia/Sydney">ğŸ‡¦ğŸ‡º AEST (Sydney)</option>
              <option value="Australia/Melbourne">ğŸ‡¦ğŸ‡º AEST (Melbourne)</option>
            </select>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="form-section">
          <h2>ğŸ‘¤ Your Contact Information</h2>
          
          <div class="form-group">
            <label for="ownerName">Your Name *</label>
            <input type="text" id="ownerName" name="ownerName" required placeholder="John Smith">
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required placeholder="john@acmeplumbing.com">
          </div>

          <div class="form-group">
            <label for="phone">Phone *</label>
            <input type="tel" id="phone" name="phone" required placeholder="+44 20 1234 5678">
          </div>

          <div class="form-group">
            <label for="role">What's your role in the business? *</label>
            <select id="role" name="role" required>
              <option value="">Choose your role...</option>
              <option value="owner">ğŸ‘‘ Business Owner</option>
              <option value="manager">ğŸ‘¨â€ğŸ’¼ Manager</option>
              <option value="director">ğŸ¯ Director</option>
              <option value="marketing">ğŸ“¢ Marketing Manager</option>
              <option value="sales">ğŸ’° Sales Manager</option>
              <option value="other">âœï¸ Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="currentLeadSource">Where do most of your leads come from? (optional)</label>
            <select id="currentLeadSource" name="currentLeadSource">
              <option value="">Choose your main source...</option>
              <option value="google">ğŸ” Google Ads</option>
              <option value="facebook">ğŸ“˜ Facebook/Instagram</option>
              <option value="referrals">ğŸ‘¥ Referrals</option>
              <option value="website">ğŸŒ Website</option>
              <option value="social">ğŸ“± Social Media</option>
              <option value="direct">ğŸ“§ Direct Mail</option>
              <option value="other">âœï¸ Other</option>
            </select>
          </div>
        </div>

        <!-- AI Preferences -->
        <div class="form-section">
          <h2>ğŸ¤– AI Assistant Preferences</h2>
          
          <div class="form-group">
            <label for="voiceGender">Voice Gender *</label>
            <select id="voiceGender" name="voiceGender" required>
              <option value="">Select voice...</option>
              <option value="female">Female (Recommended)</option>
              <option value="male">Male</option>
            </select>
          </div>

          <div class="form-group">
            <label>ğŸ“… When are you available for appointments? *</label>
            <div class="calendar-container">
              <div class="calendar-header">
                <h4>Select your working days:</h4>
              </div>
              <div class="days-grid">
                <div class="day-header">Mon</div>
                <div class="day-header">Tue</div>
                <div class="day-header">Wed</div>
                <div class="day-header">Thu</div>
                <div class="day-header">Fri</div>
                <div class="day-header">Sat</div>
                <div class="day-header">Sun</div>
                
                <div class="day-option" data-day="monday">
                  <input type="checkbox" id="day-monday" name="workingDays[]" value="monday">
                  <label for="day-monday">Mon</label>
                </div>
                <div class="day-option" data-day="tuesday">
                  <input type="checkbox" id="day-tuesday" name="workingDays[]" value="tuesday">
                  <label for="day-tuesday">Tue</label>
                </div>
                <div class="day-option" data-day="wednesday">
                  <input type="checkbox" id="day-wednesday" name="workingDays[]" value="wednesday">
                  <label for="day-wednesday">Wed</label>
                </div>
                <div class="day-option" data-day="thursday">
                  <input type="checkbox" id="day-thursday" name="workingDays[]" value="thursday">
                  <label for="day-thursday">Thu</label>
                </div>
                <div class="day-option" data-day="friday">
                  <input type="checkbox" id="day-friday" name="workingDays[]" value="friday">
                  <label for="day-friday">Fri</label>
                </div>
                <div class="day-option" data-day="saturday">
                  <input type="checkbox" id="day-saturday" name="workingDays[]" value="saturday">
                  <label for="day-saturday">Sat</label>
                </div>
                <div class="day-option" data-day="sunday">
                  <input type="checkbox" id="day-sunday" name="workingDays[]" value="sunday">
                  <label for="day-sunday">Sun</label>
                </div>
              </div>
              
              <div class="quick-select">
                <button type="button" class="quick-btn" data-days="monday,tuesday,wednesday,thursday,friday">Weekdays</button>
                <button type="button" class="quick-btn" data-days="saturday,sunday">Weekends</button>
                <button type="button" class="quick-btn" data-days="monday,tuesday,wednesday,thursday,friday,saturday,sunday">All Days</button>
                <button type="button" class="quick-btn clear-btn">Clear All</button>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>ğŸ•˜ What hours are you available? *</label>
            <div class="hours-container">
              <div class="hours-grid">
                <div class="time-slot" data-time="6am">
                  <input type="checkbox" id="hour-6am" name="workingHours[]" value="6am">
                  <label for="hour-6am">6am</label>
                </div>
                <div class="time-slot" data-time="7am">
                  <input type="checkbox" id="hour-7am" name="workingHours[]" value="7am">
                  <label for="hour-7am">7am</label>
                </div>
                <div class="time-slot" data-time="8am">
                  <input type="checkbox" id="hour-8am" name="workingHours[]" value="8am">
                  <label for="hour-8am">8am</label>
                </div>
                <div class="time-slot" data-time="9am">
                  <input type="checkbox" id="hour-9am" name="workingHours[]" value="9am">
                  <label for="hour-9am">9am</label>
                </div>
                <div class="time-slot" data-time="10am">
                  <input type="checkbox" id="hour-10am" name="workingHours[]" value="10am">
                  <label for="hour-10am">10am</label>
                </div>
                <div class="time-slot" data-time="11am">
                  <input type="checkbox" id="hour-11am" name="workingHours[]" value="11am">
                  <label for="hour-11am">11am</label>
                </div>
                <div class="time-slot" data-time="12pm">
                  <input type="checkbox" id="hour-12pm" name="workingHours[]" value="12pm">
                  <label for="hour-12pm">12pm</label>
                </div>
                <div class="time-slot" data-time="1pm">
                  <input type="checkbox" id="hour-1pm" name="workingHours[]" value="1pm">
                  <label for="hour-1pm">1pm</label>
                </div>
                <div class="time-slot" data-time="2pm">
                  <input type="checkbox" id="hour-2pm" name="workingHours[]" value="2pm">
                  <label for="hour-2pm">2pm</label>
                </div>
                <div class="time-slot" data-time="3pm">
                  <input type="checkbox" id="hour-3pm" name="workingHours[]" value="3pm">
                  <label for="hour-3pm">3pm</label>
                </div>
                <div class="time-slot" data-time="4pm">
                  <input type="checkbox" id="hour-4pm" name="workingHours[]" value="4pm">
                  <label for="hour-4pm">4pm</label>
                </div>
                <div class="time-slot" data-time="5pm">
                  <input type="checkbox" id="hour-5pm" name="workingHours[]" value="5pm">
                  <label for="hour-5pm">5pm</label>
                </div>
                <div class="time-slot" data-time="6pm">
                  <input type="checkbox" id="hour-6pm" name="workingHours[]" value="6pm">
                  <label for="hour-6pm">6pm</label>
                </div>
                <div class="time-slot" data-time="7pm">
                  <input type="checkbox" id="hour-7pm" name="workingHours[]" value="7pm">
                  <label for="hour-7pm">7pm</label>
                </div>
                <div class="time-slot" data-time="8pm">
                  <input type="checkbox" id="hour-8pm" name="workingHours[]" value="8pm">
                  <label for="hour-8pm">8pm</label>
                </div>
              </div>
              
              <div class="quick-select">
                <button type="button" class="quick-btn" data-hours="9am,10am,11am,12pm,1pm,2pm,3pm,4pm,5pm">Business Hours</button>
                <button type="button" class="quick-btn" data-hours="8am,9am,10am,11am,12pm,1pm,2pm,3pm,4pm,5pm,6pm">Extended Hours</button>
                <button type="button" class="quick-btn" data-hours="6am,7am,8am,9am,10am,11am,12pm,1pm,2pm,3pm,4pm,5pm,6pm,7pm,8pm">All Day</button>
                <button type="button" class="quick-btn clear-btn">Clear All</button>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="yearlySchedule">Do you close for holidays or seasonal breaks?</label>
            <select id="yearlySchedule" name="yearlySchedule">
              <option value="">Choose your yearly schedule...</option>
              <option value="year-round">âœ… Open year-round (No planned closures)</option>
              <option value="holidays-only">ğŸ„ Closed for major holidays (Christmas, New Year, etc.)</option>
              <option value="seasonal">â˜€ï¸ Seasonal business (e.g. Summer only, Winter only)</option>
              <option value="academic">ğŸ“ Follow school calendar (Closed during school holidays)</option>
              <option value="custom">âœï¸ Custom schedule (Specify your closure dates)</option>
            </select>
          </div>

        </div>


        <button type="submit" id="submit-btn">ğŸš€ Get Started</button>
        <p style="text-align: center; margin-top: 16px; color: #666; font-size: 13px;">
          No credit card required. We'll discuss pricing after setup.
        </p>
      </form>
    </div>

    <!-- Loading Section -->
    <div class="loading" id="loading-section">
      <div class="loading-spinner"></div>
      <div class="loading-text" id="loading-text">Creating your AI system...</div>
      <div class="loading-subtext" id="loading-subtext">This will take about 30 seconds</div>
    </div>

    <!-- Success Section -->
    <div class="success" id="success-section">
      <div class="success-icon">ğŸ‰</div>
      <h2>Your AI System is Live!</h2>
      <p style="color: #666; margin-bottom: 24px;">Check your email for complete setup instructions</p>

      <div class="success-details">
        <h3>ğŸ“¥ Your Lead Import URL:</h3>
        <p><strong id="import-url">Loading...</strong></p>
        
        <h3 style="margin-top: 16px;">ğŸ”‘ Your API Key:</h3>
        <p><strong id="api-key">Loading...</strong></p>
        
        <h3 style="margin-top: 16px;">ğŸ†” Your Client ID:</h3>
        <p><strong id="client-key">Loading...</strong></p>
      </div>

      <div class="action-buttons">
        <a href="#" id="import-link">ğŸ“¥ Import Your First Leads</a>
        <a href="#" id="dashboard-link" class="secondary">ğŸ“Š View Dashboard</a>
      </div>
    </div>
  </div>

  <script>
    // Handle "Other" selections
    document.getElementById('industry').addEventListener('change', function() {
      const industry = this.value;
      if (industry === 'other') {
        // Show custom industry input
        let customInput = document.getElementById('customIndustry');
        if (!customInput) {
          customInput = document.createElement('input');
          customInput.type = 'text';
          customInput.id = 'customIndustry';
          customInput.name = 'customIndustry';
          customInput.placeholder = 'e.g. "Consulting", "Photography", "Fitness Training"';
          customInput.required = true;
          customInput.style.marginTop = '8px';
          this.parentNode.appendChild(customInput);
        }
        customInput.style.display = 'block';
      } else {
        // Hide custom input
        const customInput = document.getElementById('customIndustry');
        if (customInput) {
          customInput.style.display = 'none';
          customInput.required = false;
        }
      }
    });

    // Interactive Calendar Functionality
    // Quick select buttons for days
    document.querySelectorAll('.quick-btn[data-days]').forEach(btn => {
      btn.addEventListener('click', function() {
        const days = this.dataset.days.split(',');
        // Clear all first
        document.querySelectorAll('input[name="workingDays[]"]').forEach(input => {
          input.checked = false;
        });
        // Select specified days
        days.forEach(day => {
          const input = document.getElementById(`day-${day}`);
          if (input) input.checked = true;
        });
      });
    });

    // Quick select buttons for hours
    document.querySelectorAll('.quick-btn[data-hours]').forEach(btn => {
      btn.addEventListener('click', function() {
        const hours = this.dataset.hours.split(',');
        // Clear all first
        document.querySelectorAll('input[name="workingHours[]"]').forEach(input => {
          input.checked = false;
        });
        // Select specified hours
        hours.forEach(hour => {
          const input = document.getElementById(`hour-${hour}`);
          if (input) input.checked = true;
        });
      });
    });

    // Clear all buttons
    document.querySelectorAll('.clear-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const container = this.closest('.calendar-container, .hours-container');
        container.querySelectorAll('input[type="checkbox"]').forEach(input => {
          input.checked = false;
        });
      });
    });

    // Handle custom yearly schedule
    document.getElementById('yearlySchedule').addEventListener('change', function() {
      const yearlySchedule = this.value;
      if (yearlySchedule === 'custom') {
        // Show custom yearly schedule input
        let customInput = document.getElementById('customYearlySchedule');
        if (!customInput) {
          customInput = document.createElement('input');
          customInput.type = 'text';
          customInput.id = 'customYearlySchedule';
          customInput.name = 'customYearlySchedule';
          customInput.placeholder = 'e.g. "Closed Dec 24-26, Jan 1" or "Open May to September only"';
          customInput.required = true;
          customInput.style.marginTop = '8px';
          this.parentNode.appendChild(customInput);
        }
        customInput.style.display = 'block';
      } else {
        // Hide custom input
        const customInput = document.getElementById('customYearlySchedule');
        if (customInput) {
          customInput.style.display = 'none';
          customInput.required = false;
        }
      }
    });

    document.getElementById('signup-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());
      
      // Handle custom industry
      if (data.industry === 'other' && data.customIndustry) {
        data.industry = data.customIndustry;
        delete data.customIndustry;
      }
      
      // Handle working days array
      if (data['workingDays[]']) {
        data.workingDays = Array.isArray(data['workingDays[]']) 
          ? data['workingDays[]'].join(',') 
          : data['workingDays[]'];
        delete data['workingDays[]'];
      }
      
      // Handle working hours array
      if (data['workingHours[]']) {
        data.workingHours = Array.isArray(data['workingHours[]']) 
          ? data['workingHours[]'].join(',') 
          : data['workingHours[]'];
        delete data['workingHours[]'];
      }
      
      // Handle custom yearly schedule
      if (data.yearlySchedule === 'custom' && data.customYearlySchedule) {
        data.yearlySchedule = data.customYearlySchedule;
        delete data.customYearlySchedule;
      }
      
      // Show loading
      document.getElementById('form-section').style.display = 'none';
      document.getElementById('loading-section').classList.add('active');
      
      const loadingSteps = [
        { text: 'Creating your AI system...', subtext: 'Setting up your account' },
        { text: 'Generating unique credentials...', subtext: 'Creating API keys' },
        { text: 'Preparing your dashboard...', subtext: 'Almost there!' },
        { text: 'Sending welcome email...', subtext: 'Final touches' }
      ];
      
      let stepIndex = 0;
      const stepInterval = setInterval(() => {
        if (stepIndex < loadingSteps.length) {
          document.getElementById('loading-text').textContent = loadingSteps[stepIndex].text;
          document.getElementById('loading-subtext').textContent = loadingSteps[stepIndex].subtext;
          stepIndex++;
        }
      }, 3000);
      
      try {
        const response = await fetch('/api/signup', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });
        
        clearInterval(stepInterval);
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.error || 'Signup failed');
        }
        
        const result = await response.json();
        
        // Show success
        document.getElementById('loading-section').classList.remove('active');
        document.getElementById('success-section').classList.add('active');
        
        // Fill in details
        const baseUrl = window.location.origin;
        const importUrl = `${baseUrl}/lead-import.html?client=${result.clientKey}&key=${result.apiKey}`;
        
        document.getElementById('import-url').textContent = importUrl;
        document.getElementById('api-key').textContent = result.apiKey;
        document.getElementById('client-key').textContent = result.clientKey;
        document.getElementById('import-link').href = importUrl;
        document.getElementById('dashboard-link').href = `${baseUrl}/dashboard/${result.clientKey}`;
        
      } catch (error) {
        clearInterval(stepInterval);
        document.getElementById('loading-section').classList.remove('active');
        document.getElementById('form-section').style.display = 'block';
        
        const errorEl = document.getElementById('error-message');
        errorEl.textContent = error.message;
        errorEl.classList.add('active');
      }
    });
  </script>
</body>
</html>

